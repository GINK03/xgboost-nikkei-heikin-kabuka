

国会図書館検索でスマホ現在地漏えいの恐れ


2016年10月05日 17時10分










　国会図書館の検索機能をスマートフォンから使うと、スマートフォンの現在地が漏えいする恐れがある。検索結果のＵＲＬアドレスに、利用者の現在地情報が含まれているためだ。Ｆａｃｅｂｏｏｋやブログなどで紹介した場合に、ＧＰＳの位置情報が一般に公開されてしまう。（ＩＴジャーナリスト・三上洋）

検索結果のＵＲＬに利用者の緯度・経度が

　国会図書館の蔵書検索機能に問題がある。スマートフォンで検索すると、結果のＵＲＬに利用者の位置情報が含まれてしまう問題だ。





＜写真１＞国会図書館サーチでｉＰｈｏｎｅ（ｉＯＳ　９．３．５）から蔵書検索した結果のページ。ＵＲＬに緯度と経度が含まれている




        AD2.init(ads.p_rectangle);
        

        AD2.cAds();
        

AD2.dBanner(0,'prect');




　＜写真１＞が実例だ。ｉＰｈｏｎｅ（ｉＯＳ９．３．５）で国会図書館サーチを利用した画面で、上にある検索結果のＵＲＬを、右側に引き出してみた。ＵＲＬの最後に「ｌａｔ＝３５．ｘｘｘ」「ｌｎｇ＝１３９．ｘｘｘ」という文字がある。「ｌａｔ」は緯度（ｌａｔｉｔｕｄｅ）、「ｌｎｇ」は経度（ｌｏｎｇｉｔｕｄｅ）で、場所を示している。
　この場所を地図で表示したところ、筆者の現在地であることがわかった。つまり国会図書館サーチの検索結果ＵＲＬに、筆者の現在地が出ているのである。
　もし筆者が国会図書館の蔵書を、ブログやＦａｃｅｂｏｏｋなどで紹介しようとＵＲＬを貼り付けた場合、見た人は筆者の現在地がわかってしまうのだ。
　この問題を発見したＩＴコンサルタントで有限会社アモニータの茂田カツノリ氏に話を伺った。「国会図書館の蔵書を紹介しようと、ＦａｃｅｂｏｏｋにＵＲＬアドレスを貼って公開しました。その時にＵＲＬの末尾に長いパラメータ（データのこと）が入っていることに気付いたのです。調べてみると、私の現在地でした。ビックリしてすぐに消しましたよ」とのこと。スマホの現在地が危うく公開されてしまうところだったのだ。
　なぜ国会図書館サーチで、スマホの現在地が出るのだろうか。理由は国会図書館サーチで「近くの図書館を表示する」という機能があるからだ。国会図書館のヘルプによると「ＧＰＳ機能を備えたスマートフォン等から位置情報を送信していただくと、詳細画面の『見る・借りる』に表示される所蔵館の一覧が、現在地から近い順に表示されます」とあり、スマホの現在地から近くの図書館を表示する機能が含まれている。





＜写真２＞近くの図書館を表示するためにスマートフォンの現在地情報を取得する表示が出る


　実際にこのページを開こうとすると、＜写真２＞のように「現在の位置情報を利用します。よろしいですか？」という表示が出る。ここでＯＫを押すと、スマホの現在地が送信されるしくみだ。近くの図書館を表示するために、許諾ありで現在地を送信することはいいとしても、ＵＲＬアドレスに現在地の緯度・経度を含めることは問題がある。

ＳＮＳへの投稿で現在地が漏えい　専門家も問題視

　この問題では、検索しただけで現在地が漏えいするのではなく、結果のＵＲＬを一般公開した場合に漏えいする。Ｇｏｏｇｌｅ検索で調べてみると、ＳＮＳで国会図書館での検索結果を紹介している人がいて、その人の位置情報がわかってしまう投稿があった。意図せずに自分の現在地を公開していることになる。
　この問題について、ウェブサイトのセキュリティーに詳しいＨＡＳＨコンサルティング代表取締役の徳丸浩氏に話を伺った。「ＵＲＬアドレスに利用者の位置情報を入れるのは問題だ。このＵＲＬを公開した場合に、現在地情報が漏れてしまう」と述べ、国会図書館サーチに問題があると指摘した。
　同様の例は他にもあるだろうか？　徳丸氏によれば「携帯電話の時代には、利用中のユーザーを識別する情報であるセッションＩＤをＵＲＬに含んでしまうサイトが問題になっていた。しかしスマートフォンの時代になり、プライバシー保護の意識が高まっている中、ＵＲＬに機密情報を含むのは大きな問題だ。インターネットの技術標準文書であるＲＦＣにも『ＵＲＬには機密情報を入れるべきではない（ＲＦＣ２６１６　１５．１等）』と定められており、国会図書館サーチはこれに反している」と述べた。
　筆者が調べたところ、ｉＰｈｏｎｅ・ｉＰａｄのｉＯＳ　９．３．５以前のブラウザー・Ｓａｆａｒｉで検索した場合に、この問題が発生していた。それに対して、ｉＯＳ　１０以降のＳａｆａｒｉ、Ａｎｄｒｏｉｄのブラウザー、ＡｎｄｒｏｉｄのＣｈｒｏｍｅでは、ＵＲＬの位置情報が空欄になっていた。これはブラウザー側が、位置情報を必要とするサイトからの要求を拒否するように仕様が変わっているからだ（暗号化されていないｈｔｔｐ接続でのページで現在地を取得することを禁止するもの）。ｉＯＳ９．３．５以前のＳａｆａｒｉの仕様が古いために起きている。
　しかしながら、あくまで利用者側のブラウザーが禁止したために取得できないだけで、国会図書館サーチ自体は、暗号化されていないｈｔｔｐ接続で位置情報を取得しようとし、かつ取得できた場合にＵＲＬに含んでしまっている。
　これについて徳丸氏は「ＵＲＬに利用者の位置情報を含むことに加えて、暗号化されていないｈｔｔｐ接続で位置情報を取得することも問題だ。また国会図書館から別のサイトへのリンクがあった場合、別のサイトへＵＲＬがリファラーとして伝わるために、利用者の位置情報もわかってしまう。できるだけ早く改修するべきだ」として危険性を指摘した。

改修されるまでは検索結果ＵＲＬは公開しないで





国会図書館の蔵書検索ができる「国会図書館サーチ」。スマートフォンの一部で検索した場合に、結果のＵＲＬに利用者の緯度と経度が含まれてしまう


　この問題について国会図書館に話を聞いた。「位置情報がＵＲＬに含まれていることは把握している。ＵＲＬに含まれるのは位置情報のみであり、個人を特定するものではないので、ＵＲＬだけが第三者に知られたとしても個人が特定できるわけではない。現時点では改修の予定はない。ただしＵＲＬに位置情報を含めない方策についても今後検討していきたい」（国会図書館総務課広報）とのことだった。
　このように国会図書館サーチの結果をツイートしたりＦａｃｅｂｏｏｋでシェアしたりした場合、スマートフォンの現在地が一般公開されてしまう可能性がある。ＧＰＳを取得しないパソコンや、ｉＯＳ１０以降のｉＰｈｏｎｅ、ＡｎｄｒｏｉｄのＣｈｒｏｍｅなどでは大丈夫だが、他のブラウザーでも注意したほうがいいだろう。

●スマートフォンでのウェブサイト利用時の位置情報注意点

・国会図書館サーチの結果を公開しない　国会図書館の蔵書を探した結果のＵＲＬを一般公開しない。Ｔｗｉｔｔｅｒ、Ｆａｃｅｂｏｏｋ、ブログなどにＵＲＬを貼った場合、あなたの現在地が漏れる可能性がある。

・「位置情報を利用します。よろしいですか？」はキャンセルで　スマホのウェブサイトで「位置情報を利用します。よろしいですか？」と表示された場合、安易に「ＯＫ」を押さないこと。現在地情報を渡していいかどうか慎重に判断する。

　問題の解決には、国会図書館のシステム自体を改修する必要がある。図書館の利用履歴は重要なプライバシーであり、日本図書館協会の「図書館の自由に関する宣言」でも「第３　図書館は利用者の秘密を守る」として、「利用者の読書事実、利用事実は、図書館が業務上知り得た秘密であって、図書館活動に従事するすべての人びとは、この秘密を守らなければならない」とうたわれている。
　ネットでの検索結果が「利用事実」かどうかは微妙なところではあるが、今回の問題はスマホの現在地を一般公開してしまう原因となっている。いち早くシステムの改修をお願いしたい。

●参考サイト・国立国会図書館サーチについて：国立国会図書館・図書館の自由に関する宣言：日本図書館協会・２０１５年の「１０大セキュリティ事件」解説：サイバー護身術

2016年10月05日 17時10分
Copyright © The Yomiuri Shimbun



